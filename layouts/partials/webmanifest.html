<!-- Check if site.webmanifest exists in static directory -->
{{ if (fileExists "static/my-favicon/site.webmanifest") }}
  <link rel="manifest" href="{{ relURL "my-favicon/site.webmanifest" }}">
{{ else }}
  <!-- Generate dynamic manifest -->
  {{ $manifest := dict 
    "name" .Site.Title
    "short_name" .Site.Title
    "icons" (slice 
      (dict
        "src" (relURL "my-favicon/android-chrome-192x192.png")
        "sizes" "192x192"
        "type" "image/png"
      )
      (dict
        "src" (relURL "my-favicon/android-chrome-512x512.png")
        "sizes" "512x512"
        "type" "image/png"
      )
    )
    "theme_color" "#ffffff"
    "background_color" "#ffffff"
    "display" "standalone"
  }}

  {{ $manifestJSON := $manifest | jsonify }}
  {{ $manifestResource := $manifestJSON | resources.FromString "my-favicon/site.webmanifest" }}
  <link rel="manifest" href="{{ $manifestResource.RelPermalink }}">
{{ end }}
