{{- /* filepath: /home/gespitia/projects/PKB-theme/layouts/index.json */ -}}
{{- $pages := where .Site.RegularPages "Type" "in" .Site.Params.taxonomies.mainSections -}}
{{- $searchData := slice -}}
{{- range $pages -}}
  {{- if not .Params.private -}}
    {{- $item := dict 
        "id" .File.UniqueID
        "title" .Title
        "content" (.Plain | htmlUnescape | plainify | truncate 1000)
        "summary" (.Summary | htmlUnescape | plainify)
        "url" .RelPermalink
        "date" (.Date.Format "2006-01-02")
        "section" .Section
        "type" .Type
        "tags" .Params.tags
        "categories" .Params.categories
    -}}
    {{- $searchData = $searchData | append $item -}}
  {{- end -}}
{{- end -}}
{{- $searchData | jsonify -}}