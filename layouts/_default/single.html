{{ define "main" }}
<div class="layout-container">
  <aside class="toc-sidebar">
    <nav id="TableOfContents" class="toc">
      {{ .TableOfContents }}
    </nav>
  </aside>
  <main class="main-content">
    <h1>{{ .Title }}</h1>
    {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
    {{ $dateHuman := .Date | time.Format ":date_long" }}
    <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
    <div class="sidenote-container">
      <div class="main-content">
        {{ .Content }}
      </div>
    </div>
    {{ partial "terms.html" (dict "taxonomy" "tags" "page" .) }}
  </main>
</div>

{{/* Conditionally include toc.js if TOC is enabled in front matter */}}
{{ if .Params.toc }}
  {{ $tocJS := resources.Get "js/toc.js" | minify | fingerprint }}
  <script src="{{ $tocJS.RelPermalink }}" integrity="{{ $tocJS.Data.Integrity }}" crossorigin="anonymous"></script>
{{ end }}

{{/* Conditionally include sidenote.css if sidenotes are enabled in front matter */}}
{{ if .Params.sidenotes }}
  {{ $sidenoteCSS := resources.Get "css/components/sidenote.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $sidenoteCSS.RelPermalink }}" integrity="{{ $sidenoteCSS.Data.Integrity }}" crossorigin="anonymous">
{{ end }}
{{ end }}
